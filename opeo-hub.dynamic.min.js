document.addEventListener("DOMContentLoaded", async function () {
  const hub = `
<div id="opeo-hub">
 <div class="opeo-logo">
   <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjM6glU4QiTxviQFMuEFvBc3QPawHbVfr0kM0pwYfwVuzaAIFBIh4Z7x0nNKuhfaKdzXpHhw_TELkrWc3ZzULMDSUUs3sT-EuceRlkGjtjAU_zbALs6kCZz11mOQzFSEXt4HJizEqMxWKa47k7IZVDkLomibCUB9cwF2pBEysedMoPbVyyITC6-NJnr4EQ/s1600/fav%20logo%20opeo.png" alt="OPEO Hub"/>
 </div>
 <div class="opeo-marquee">
   <div class="opeo-links" id="opeo-links"></div>
 </div>
</div>
<style>
@import url('https://fonts.googleapis.com/css2?family=Barlow:wght@500&display=swap');
#opeo-hub{background:linear-gradient(180deg,#1000ff,#f100ff);color:#fff;font-family:'Barlow',sans-serif;display:flex;align-items:center;padding:6px 10px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,.6);border-bottom:2px solid #fff;text-transform:uppercase;z-index:9999;}
@media(prefers-color-scheme:dark){#opeo-hub{background:linear-gradient(180deg,#0a0033,#460066);border-bottom-color:#aa00ff;}}
.opeo-logo img{height:38px;width:38px;border-radius:50%;box-shadow:0 0 8px rgba(255,255,255,.8);margin-right:12px;flex-shrink:0;}
.opeo-marquee{flex:1;overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch;scroll-behavior:smooth;scrollbar-width:none;}
.opeo-marquee::-webkit-scrollbar{display:none;}
.opeo-links{display:inline-flex;align-items:center;gap:12px;animation:scroll-links 45s linear infinite;}
#opeo-hub:hover .opeo-links{animation-play-state:paused;}
.opeo-links a{color:#fff;text-decoration:none;padding:2px 6px;border-radius:6px;transition:.3s;text-shadow:0 0 6px rgba(0,0,0,.6);}
.opeo-links a:hover{color:#000;background:rgba(255,255,255,.75);}
@keyframes scroll-links{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
</style>`;

  document.body.insertAdjacentHTML("afterbegin", hub);

  const container = document.getElementById("opeo-links");

  try {
    const json = await fetch("https://cdn.jsdelivr.net/gh/pejotta/opeo-hub/links.json", { cache: "no-store" })
      .then(r => r.json());

    json.forEach(item => {
      const a = document.createElement("a");
      a.href = item.url;
      a.target = "_blank";
      a.textContent = item.nome;
      container.appendChild(a);
    });

  } catch (err) {
    container.innerHTML = "<span style='opacity:.8'>Erro ao carregar a rede OPEO.</span>";
  }
});
